<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOP：Slot Game 美術規格樣板建立流程</title>
    <style>
        :root {
            --main-bg-color: #f8f9fa;
            --content-bg-color: #ffffff;
            --sidebar-bg-color: #e9ecef;
            --text-color: #212529;
            --heading-color: #007bff;
            --border-color: #dee2e6;
            --accent-color: #007bff;
            --code-bg-color: #282c34;
            --code-text-color: #abb2bf;
            --panel-bg-color: #f0f0f0;
            --layer-bg-color: #fff;
            --layer-hover-bg: #e6f2ff;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            background-color: var(--main-bg-color);
            color: var(--text-color);
            display: flex;
        }
        .sidebar {
            width: 300px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background-color: var(--sidebar-bg-color);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            overflow-y: auto;
        }
        .sidebar h2 {
            font-size: 1.2em;
            color: var(--heading-color);
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li a {
            display: block;
            padding: 8px 10px;
            color: var(--text-color);
            text-decoration: none;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .sidebar li a:hover, .sidebar li a.active {
            background-color: var(--accent-color);
            color: white;
        }
        .content {
            margin-left: 340px;
            padding: 30px;
            width: calc(100% - 340px);
        }
        section {
            background-color: var(--content-bg-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 25px;
            padding: 25px;
        }
        h1, h2, h3, h4 {
            color: var(--heading-color);
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
        }
        h1 { font-size: 2.2em; }
        h2 { font-size: 1.8em; }
        h3 {
            font-size: 1.5em;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        h4 { font-size: 1.2em; border-bottom-style: dashed; margin-top: 2em; }
        h3::after {
            content: '▼';
            font-size: 0.8em;
            transition: transform 0.3s;
        }
        h3.collapsed::after {
            transform: rotate(-90deg);
        }
        .phase-content {
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            max-height: 20000px; /* Large enough for content */
            padding-top: 15px;
        }
        .phase-content.collapsed {
            max-height: 0;
            padding-top: 0;
            padding-bottom: 0;
        }
        ul, ol {
            padding-left: 20px;
        }
        li {
            margin-bottom: 10px;
        }
        strong {
            color: #333;
        }
        code {
            font-family: "SF Mono", "Fira Code", "Consolas", monospace;
            background-color: rgba(0, 123, 255, 0.05);
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        pre {
            background-color: var(--code-bg-color);
            color: var(--code-text-color);
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        pre code {
            background-color: transparent;
            padding: 0;
            font-size: 1em;
        }
        hr {
            border: 0;
            border-top: 1px solid var(--border-color);
            margin: 2em 0;
        }

        /* Visual Panel Styles */
        .visual-panel {
            background-color: var(--panel-bg-color);
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 10px;
            font-family: "SF Mono", "Fira Code", "Consolas", monospace;
            font-size: 13px;
        }
        .layer-row {
            display: flex;
            align-items: center;
            padding: 5px 8px;
            border-radius: 4px;
            margin-bottom: 2px;
            background-color: var(--layer-bg-color);
            border: 1px solid #ddd;
        }
        .layer-row:hover { background-color: var(--layer-hover-bg); }
        .layer-group > .layer-row { font-weight: bold; }
        .layer-content {
            padding-left: 25px;
        }
        .layer-icon {
            width: 16px;
            height: 16px;
            margin-right: 8px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            flex-shrink: 0;
        }
        .icon-group { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="%236c757d" d="M2 2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H2zm0-1h12a3 3 0 0 1 3 3v8a3 3 0 0 1-3 3H2a3 3 0 0 1-3-3V4a3 3 0 0 1 3-3z"/><path fill="%236c757d" d="M1 4a1 1 0 0 1 1-1h4.382a1 1 0 0 1 .707.293l.853.853a1 1 0 0 0 .708.293H14a1 1 0 0 1 1 1v1H1V4z"/></svg>'); }
        .icon-layer { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="%236c757d" d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3zm1 0v10h12V3H2z"/></svg>'); }
        .icon-fx { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="%23007bff" d="M3.5 0a.5.5 0 0 1 .5.5V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V2h1V.5a.5.5 0 0 1 1 0V3a.5.5 0 0 1-.5.5h-10A.5.5 0 0 1 1 3V.5a.5.5 0 0 1 .5-.5H3zm10 16a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V14h-1v1.5a.5.5 0 0 1-1 0V13a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v2.5z"/><path fill="%23007bff" d="M8.5 4a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V8a.5.5 0 0 0 1 0V6.5H10a.5.5 0 0 0 0-1H8.5V4z"/></svg>'); }
        .icon-mask { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="7" fill="none" stroke="%236c757d" stroke-width="1"/><path fill="%236c757d" d="M8 1a7 7 0 0 0 0 14V1z"/></svg>'); }
        .icon-inst { background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="%2328a745" d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3zm1 0v10h12V3H2z"/><path fill="%2328a745" d="M10 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0z"/></svg>'); }
        .layer-name-tag { padding: 1px 5px; border-radius: 3px; color: #fff; margin-right: 4px; font-size: 0.85em; }
        .tag-type { background-color: #6c757d; }
        .tag-name { color: #000; font-weight: bold; }
        .tag-size { background-color: #17a2b8; }
        .tag-lang { background-color: #28a745; }
        .tag-state { background-color: #ffc107; color: #212529; }
        .tag-special { background-color: #dc3545; }
    </style>
</head>
<body>

    <nav class="sidebar">
        <h2>SOP 導航</h2>
        <ul id="sidebar-nav">
            <li><a href="#phase-1">階段 1：檔案初始化與畫布設定</a></li>
            <li><a href="#phase-2">階段 2：建立核心圖層群組結構</a></li>
            <li><a href="#visual-example">視覺化圖層結構範例</a></li>
            <li><a href="#phase-3">階段 3：定義圖層命名與元數據規範</a></li>
            <li><a href="#phase-4">階段 4：建立佔位符與內容</a></li>
            <li><a href="#phase-5">階段 5：維護與導出</a></li>
            <li><a href="#phase-6">階段 6：導出圖層元數據供引擎使用</a></li>
            <li><a href="#phase-7">階段 7：Tile Map (瓦片地圖) 資產建立</a></li>
            <li><a href="#phase-8">階段 8：遊戲內程式效果定義</a></li>
            <li><a href="#phase-9">階段 9：遊戲引擎遮罩定義</a></li>
            <li><a href="#phase-10">階段 10：資產實例化與變形定義</a></li>
        </ul>
    </nav>

    <main class="content">
        <h1>SOP：Slot Game 美術規格樣板 (Photoshop) 建立流程</h1>
        <p><strong>目標：</strong> 建立一個結構化、標準化的 Photoshop (<code>.psd</code>) 樣板檔案，作為所有靜態美術素材的設計與規格基準。此樣板將定義圖層組織、命名規則、尺寸邊界與語系，以利於團隊協作及後續的自動化素材導出。</p>
        
        <hr>

        <section id="phase-1">
            <h3>階段 1：檔案初始化與畫布設定</h3>
            <div class="phase-content">
                <h4>1. 建立新檔案:</h4>
                <ul>
                    <li><strong>動作:</strong> 在 Photoshop 中建立一個新的 <code>.psd</code> 檔案。</li>
                    <li><strong>規格:</strong>
                        <ul>
                            <li><strong>畫布尺寸 (Canvas Size):</strong> 設定為遊戲的目標解析度，例如 <code>1920x1080</code> 像素。</li>
                            <li><strong>解析度 (Resolution):</strong> <code>72</code> pixels/inch。</li>
                            <li><strong>色彩模式 (Color Mode):</strong> <code>RGB Color</code>, <code>8-bit</code>。</li>
                        </ul>
                    </li>
                </ul>
                <h4>2. 設定參考線與網格 (Guides & Grid):</h4>
                <ul>
                    <li><strong>動作:</strong> 建立全域參考線，標示出遊戲畫面的重要區域。</li>
                    <li><strong>建議參考線:</strong>
                        <ul>
                            <li><strong>安全區域 (Safe Area):</strong> 定義在不同螢幕比例下內容保證可見的範圍。</li>
                            <li><strong>Reel 區塊:</strong> 標示出 5x3 或其他規格的滾輪區域。</li>
                            <li><strong>上方 UI 區:</strong> 標示 Jackpot、Logo 等資訊的區域。</li>
                            <li><strong>主操作區 UI:</strong> 標示 Spin 按鈕、下注調整、餘額顯示等控制項的區域。</li>
                        </ul>
                    </li>
                    <li><strong>目的:</strong> 確保所有 UI 元素在設計時都有一個對齊的基準。</li>
                </ul>
            </div>
        </section>

        <section id="phase-2">
            <h3>階段 2：建立核心圖層群組結構</h3>
            <div class="phase-content">
                <h4>1. 建立主群組 (Top-Level Groups):</h4>
                <ul>
                    <li><strong>動作:</strong> 在圖層面板中，建立以下 11 個主要圖層群組。這是樣板的骨架。</li>
                    <li><strong>群組列表:</strong>
                        <ol>
                            <li><code>介面公版</code> (Common_Interface)</li>
                            <li><code>jackpot 公版</code> (Common_Jackpot)</li>
                            <li><code>跑馬燈</code> (Marquee)</li>
                            <li><code>主操作區UI</code> (UI_MainControls)</li>
                            <li><code>上方UI</code> (UI_Top)</li>
                            <li><code>base game 背景</code> (BG_BaseGame)</li>
                            <li><code>free game 背景</code> (BG_FreeGame)</li>
                            <li><code>符號</code> (Symbols)</li>
                            <li><code>角色</code> (Characters)</li>
                            <li><code>reel</code> (Reels)</li>
                            <li><code>其他</code> (Misc)</li>
                        </ol>
                    </li>
                </ul>
                <h4>2. 建立子群組 (Sub-Groups):</h4>
                <ul>
                    <li><strong>動作:</strong> 在主群組內建立更詳細的分類子群組，增加組織性。</li>
                    <li><strong>範例:</strong>
                        <ul>
                            <li>在 <code>主操作區UI</code> 內建立 <code>Buttons</code>, <code>Info_Displays</code>, <code>Bet_Controls</code>。</li>
                            <li>在 <code>符號</code> 內建立 <code>High_Pay</code>, <code>Low_Pay</code>, <code>Special_Symbols</code>。</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <section id="visual-example">
            <h3>視覺化圖層結構範例</h3>
            <div class="phase-content">
                <p>以下是一個模擬的 Photoshop 圖層面板，展示了本 SOP 中定義的各種圖層和群組的組織方式。</p>
                <div class="visual-panel">
                    <!-- Reel Group Example -->
                    <div class="layer-group">
                        <div class="layer-row"><span class="layer-icon icon-group"></span>Reel_1_Content_Group</div>
                        <div class="layer-content">
                            <div class="layer-row"><span class="layer-icon icon-mask"></span><span class="layer-name-tag tag-special">[MASK]</span><span class="tag-name">Reel_1_Content_Group</span></div>
                            <div class="layer-row"><span class="layer-icon icon-layer"></span><span class="layer-name-tag tag-type">SYM</span><span class="tag-name">Anubis</span><span class="layer-name-tag tag-size">256x256</span><span class="layer-name-tag tag-lang">ALL</span></div>
                        </div>
                    </div>
                    <!-- Background with FX -->
                    <div class="layer-group">
                        <div class="layer-row"><span class="layer-icon icon-group"></span>BG_BaseGame</div>
                        <div class="layer-content">
                            <div class="layer-row"><span class="layer-icon icon-fx"></span><span class="layer-name-tag tag-special">[FX]</span><span class="tag-name">DARKEN_70</span></div>
                            <div class="layer-row"><span class="layer-icon icon-layer"></span><span class="layer-name-tag tag-type">BG</span><span class="tag-name">BaseGame</span><span class="layer-name-tag tag-size">1920x1080</span><span class="layer-name-tag tag-lang">ALL</span></div>
                        </div>
                    </div>
                    <!-- UI Controls Group -->
                    <div class="layer-group">
                        <div class="layer-row"><span class="layer-icon icon-group"></span>UI_MainControls</div>
                        <div class="layer-content">
                            <div class="layer-row"><span class="layer-icon icon-layer"></span><span class="layer-name-tag tag-type">BTN9</span><span class="tag-name">Button_Normal</span><span class="layer-name-tag tag-size">300x150</span><span class="layer-name-tag tag-lang">ALL</span></div>
                            <div class="layer-row"><span class="layer-icon icon-layer"></span><span class="layer-name-tag tag-type">ICON</span><span class="tag-name">ArrowLeft</span><span class="layer-name-tag tag-size">64x64</span><span class="layer-name-tag tag-lang">ALL</span></div>
                            <div class="layer-row"><span class="layer-icon icon-inst"></span><span class="layer-name-tag tag-special">[INST]</span><span class="tag-name">ArrowRight_ArrowLeft_FLIP_H</span></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="phase-3">
            <h3>階段 3：定義圖層命名與元數據規範</h3>
            <div class="phase-content">
                <p>這是此 SOP 的核心。所有圖層都必須遵循此命名規則，以便 AI 或腳本能解析並自動處理。</p>
                <h4>1. 命名結構:</h4>
                <pre><code>[類型]_[名稱]_[尺寸]_[語系]_[狀態]</code></pre>
                <h4>2. 欄位定義:</h4>
                <ul>
                    <li><code>[類型]</code>: 圖層資產的類別縮寫。
                        <ul>
                            <li><code>BG</code>: 背景 (Background)</li>
                            <li><code>SYM</code>: 符號 (Symbol)</li>
                            <li><code>BTN</code>: 按鈕 (Button)</li>
                            <li><code>ICON</code>: 圖標 (Icon)</li>
                            <li><code>FRAME</code>: 框體 (Frame)</li>
                            <li><code>TXT</code>: 文字 (Text) - *若文字內容需本地化*</li>
                            <li><code>IMG</code>: 裝飾性圖片 (Image)</li>
                            <li><strong><code>BG9</code></strong>: 可九宮格縮放的背景 (9-Slice Background)</li>
                            <li><strong><code>BTN9</code></strong>: 可九宮格縮放的按鈕 (9-Slice Button)</li>
                            <li><strong><code>FRAME9</code></strong>: 可九宮格縮放的框體 (9-Slice Frame)</li>
                            <li><strong><code>PANEL9</code></strong>: 可九宮格縮放的面板 (9-Slice Panel)</li>
                        </ul>
                    </li>
                    <li><code>[名稱]</code>: 資產的具體英文或拼音名稱。 (e.g., <code>Spin</code>, <code>Wild</code>, <code>Anubis</code>)</li>
                    <li><code>[尺寸]</code>: 該圖層內容的導出邊界，格式為 <code>寬x高</code> (e.g., <code>256x256</code>)。</li>
                    <li><code>[語系]</code>: 定義此素材的語言屬性。 (e.g., <code>ALL</code>, <code>EN</code>, <code>TC</code>, <code>SC</code>)</li>
                    <li><code>[狀態]</code>: (可選) 主要用於 UI 元素，定義其互動狀態。 (e.g., <code>Normal</code>, <code>Hover</code>, <code>Pressed</code>)</li>
                </ul>
                <h4>3. 命名範例:</h4>
                <ul>
                    <li>Spin 按鈕的正常狀態: <code>BTN_Spin_300x150_ALL_Normal</code></li>
                    <li>一個可縮放的按鈕面板: <code>PANEL9_Default_128x128_ALL_Normal</code></li>
                    <li>Wild 符號: <code>SYM_Wild_256x256_ALL</code></li>
                    <li>需要翻譯的「贏得」文字標題: <code>TXT_WinTitle_400x100_TC</code></li>
                </ul>
            </div>
        </section>

        <section id="phase-4">
            <h3>階段 4：建立佔位符與內容</h3>
            <div class="phase-content">
                <h4>1. 建立佔位符圖層:</h4>
                <ul>
                    <li><strong>動作:</strong> 根據遊戲規格文件，在對應的群組內為<strong>每一個</strong>所需的美術資源建立一個圖層，並使用色塊或簡單形狀作為佔位符。</li>
                    <li><strong>關鍵:</strong> 嚴格按照階段 3 的規範為每一個佔位符圖層命名。此時，<code>.psd</code> 檔案本身就是一份視覺化的規格與待辦清單。</li>
                </ul>
                <h4>2. 轉換為智慧型物件 (Smart Objects):</h4>
                <ul>
                    <li><strong>動作:</strong> 將每一個佔位符圖層轉換為「智慧型物件」。</li>
                    <li><strong>目的:</strong>
                        <ul>
                            <li><strong>非破壞性編輯:</strong> 可以在不影響主文件佈局的情況下，獨立編輯每個素材。</li>
                            <li><strong>易於替換:</strong> 未來 AI 生成或人工繪製的素材，可以直接更新智慧型物件的內容，尺寸和位置會自動對應。</li>
                        </ul>
                    </li>
                </ul>
                <h4>3. 定義九宮格 (9-Slice) 邊界:</h4>
                <ul>
                    <li><strong>對象:</strong> 所有 <code>[類型]</code> 結尾為 <code>9</code> 的圖層 (如 <code>BTN9</code>, <code>PANEL9</code>)。</li>
                    <li><strong>動作:</strong> 使用 Photoshop 的 <strong>參考線 (Guides)</strong> 來定義九宮格的切割線。</li>
                    <li><strong>執行步驟:</strong>
                        <ol>
                            <li>選中目標圖層（例如 <code>PANEL9_Default_128x128_ALL_Normal</code>）。</li>
                            <li>從尺標拖曳出 <strong>兩條垂直參考線</strong> 和 <strong>兩條水平參考線</strong>。</li>
                            <li>將這四條參考線放置在圖層內容上，用以框選出中間可拉伸的區域。四個角落的內容將保持原始尺寸，不會被拉伸變形。</li>
                        </ol>
                    </li>
                </ul>
            </div>
        </section>

        <section id="phase-5">
            <h3>階段 5：維護與導出</h3>
            <div class="phase-content">
                <h4>1. 版本控制:</h4>
                <ul>
                    <li><strong>建議:</strong> 使用 Git LFS (Large File Storage) 或其他雲端同步工具對此核心 <code>.psd</code> 樣板進行版本控制，方便追蹤修改歷史。</li>
                </ul>
                <h4>2. 素材導出:</h4>
                <ul>
                    <li><strong>方法:</strong> 可利用 Photoshop 的「產生 -> 影像資產」功能，或搭配第三方腳本 (如 Adobe UXP Script)。</li>
                    <li><strong>自動化基礎:</strong> 由於圖層已包含完整的命名元數據，可以輕易編寫腳本來讀取所有圖層，並根據其名稱自動導出為對應的檔名 (e.g., <code>BTN_Spin_Normal.png</code>) 和尺寸，存放到正確的資料夾。</li>
                </ul>
            </div>
        </section>

        <section id="phase-6">
            <h3>階段 6：導出圖層元數據供引擎使用</h3>
            <div class="phase-content">
                <p><strong>目的：</strong> 自動化產出一份結構化的數據文件（建議為 JSON 格式），該文件包含每個美術資源在遊戲引擎中佈局、渲染所需的所有參數。</p>
                <h4>1. 執行方式：Photoshop 腳本</h4>
                <ul>
                    <li><strong>動作：</strong> 此流程需要透過 Photoshop 腳本（建議使用 UXP 或 ExtendScript）來執行，導出為 <code>layout.json</code> 文件。</li>
                </ul>
                <h4>2. 腳本需提取的數據邏輯：</h4>
                <ul>
                    <li>遍歷圖層 (Iterate Layers)</li>
                    <li>解析圖層名稱 (Parse Layer Name)</li>
                    <li>讀取圖層屬性 (Read Layer Properties): 邊界範圍, 透明度, 混合模式。</li>
                    <li>計算引擎用數據 (Calculate Engine Data): 引擎內座標, Z-Index, 九宮格邊界。</li>
                </ul>
                <h4>3. 產出 JSON 結構範例 (<code>layout.json</code>):</h4>
                <pre><code>{
  "scene_dimensions": { "width": 1920, "height": 1080 },
  "assets": {
    "PANEL9_Default_Normal": {
      "source_image": "PANEL9_Default_128x128_ALL_Normal.png",
      "size": { "width": 128, "height": 128 },
      "bounds_in_canvas": { "x": 100, "y": 200, "width": 128, "height": 128 },
      "z_index": 50,
      "nine_slice_margins": { "left": 20, "top": 20, "right": 20, "bottom": 20 }
    }
  }
}</code></pre>
            </div>
        </section>

        <section id="phase-7">
            <h3>階段 7：Tile Map (瓦片地圖) 資產建立</h3>
            <div class="phase-content">
                <p><strong>核心概念:</strong> Tileset (圖塊集) 在 Photoshop 中製作，而 Tilemap Data (地圖數據) 在專門的地圖編輯器中完成。</p>
                <h4>1. Photoshop 中的 Tileset 建立流程:</h4>
                <ol>
                    <li><strong>建立 Tileset 專用檔案:</strong> 例如 <code>tileset_forest_128x128.psd</code>。</li>
                    <li><strong>設定精確網格 (Grid):</strong> 網格間距設為圖塊尺寸。</li>
                    <li><strong>繪製與組織圖塊:</strong> 每個圖塊一個圖層，對齊網格。</li>
                    <li><strong>定義圖塊 ID (Tile ID):</strong> ID 由圖塊在網格中的位置決定。</li>
                    <li><strong>導出 Tileset:</strong> 導出為一張單一的 <code>.png</code> 圖片。</li>
                </ol>
                <h4>2. 在主樣板中進行視覺預覽:</h4>
                <ul>
                    <li>在主 <code>.psd</code> 中建立一個名為 <code>[PREVIEW]_Tilemap</code> 的圖層群組來拼湊場景，此群組不會被導出。</li>
                </ul>
            </div>
        </section>

        <section id="phase-8">
            <h3>階段 8：遊戲內程式效果定義</h3>
            <div class="phase-content">
                <p><strong>原則：</strong> 「一份資源，多種呈現」，以節省包體大小。</p>
                <h4>1. 定義方式：效果指令圖層</h4>
                <p>使用一個特殊的**空圖層**作為指令載體，放置在目標圖層正上方。</p>
                <p><strong>命名規範：</strong> <code>[FX]_[效果類型]_[參數]</code></p>
                <ul>
                    <li><code>[FX]</code>: 固定前綴。</li>
                    <li><code>[效果類型]</code>: <code>DARKEN</code> (壓暗) 或 <code>TINT</code> (純色覆蓋)。</li>
                    <li><code>[參數]</code>:
                        <ul>
                            <li><code>DARKEN</code>: 0-100 的不透明度。</li>
                            <li><code>TINT</code>: 6位十六進制顏色碼 (e.g., <code>FF0000</code>)。</li>
                        </ul>
                    </li>
                </ul>
                <h4>2. 範例:</h4>
                <ul>
                    <li>壓暗背景: 在背景圖層上方建立空圖層，命名為 <code>[FX]_DARKEN_70</code>。</li>
                    <li>Tint 符號: 在符號圖層上方建立空圖層，命名為 <code>[FX]_TINT_FF3300</code>。</li>
                </ul>
                <h4>3. JSON 產出影響:</h4>
                <p>導出腳本會在目標資產的數據中加入一個 <code>effects</code> 陣列。</p>
                <pre><code>"SYM_Anubis": {
  "...": "...",
  "effects": [
    { "type": "TINT", "color": "FF3300", "trigger": "on_character_hit" }
  ]
}</code></pre>
            </div>
        </section>

        <section id="phase-9">
            <h3>階段 9：遊戲引擎遮罩定義</h3>
            <div class="phase-content">
                <p><strong>應用場景：</strong> 滾輪內容裁切、非矩形點擊區域等。</p>
                <h4>1. 定義方式：遮罩圖層系統</h4>
                <p>使用一個獨立的、會被導出為灰階圖的圖層來定義遮罩。</p>
                <p><strong>命名規範：</strong> <code>[MASK]_[目標名稱]</code></p>
                <ul>
                    <li><code>[MASK]</code>: 固定前綴。</li>
                    <li><code>[目標名稱]</code>: 此遮罩要影響的圖層群組名稱。</li>
                </ul>
                <h4>2. 範例:</h4>
                <ul>
                    <li><strong>目標群組:</strong> <code>Reel_1_Content_Group</code></li>
                    <li><strong>遮罩圖層名稱:</strong> <code>[MASK]_Reel_1_Content_Group</code></li>
                </ul>
                <h4>3. JSON 產出影響:</h4>
                <p><code>layout.json</code> 中會新增一個遮罩資源的定義。</p>
                <pre><code>"Reel_1_Content_Group_Mask": {
  "source_image": "MASK_Reel_1_Content_Group.png",
  "type": "mask",
  "applies_to": "Reel_1_Content_Group"
}</code></pre>
            </div>
        </section>

        <section id="phase-10">
            <h3>階段 10：資產實例化與變形定義</h3>
            <div class="phase-content">
                <p><strong>原則：</strong> 「一次繪製，多次使用」，適用於鏡射等對稱性資源。</p>
                <h4>1. 定義方式：實例指令圖層</h4>
                <p>使用一個佔位符圖層來代表一個引用其他資產內容的新物件。</p>
                <p><strong>命名規範：</strong> <code>[INST]_[新資產名稱]_[來源資產名稱]_[變形]</code></p>
                <ul>
                    <li><code>[INST]</code>: 固定前綴，此圖層不會導出圖片。</li>
                    <li><code>[新資產名稱]</code>: 新資產在 JSON 中的名字 (e.g., <code>ArrowRight</code>)。</li>
                    <li><code>[來源資產名稱]</code>: 來源資產的名字 (e.g., <code>ArrowLeft</code>)。</li>
                    <li><code>[變形]</code>: <code>FLIP_H</code> (水平鏡射) 或 <code>FLIP_V</code> (垂直鏡射)。</li>
                </ul>
                <h4>2. 範例:</h4>
                <ul>
                    <li><strong>來源圖層:</strong> <code>ICON_ArrowLeft_128x128_ALL</code></li>
                    <li><strong>實例圖層:</strong> <code>[INST]_ArrowRight_ArrowLeft_FLIP_H</code></li>
                </ul>
                <h4>3. JSON 產出影響:</h4>
                <p>新資產會複用來源資產的圖片，並額外記錄一個 <code>transform</code> 屬性。</p>
                <pre><code>"ArrowRight": {
  "source_image": "ICON_ArrowLeft_128x128_ALL.png",
  "bounds_in_canvas": { "x": 1500, "y": 800, "width": 128, "height": 128 },
  "transform": {
    "flip_h": true,
    "flip_v": false
  }
}</code></pre>
            </div>
        </section>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const sections = document.querySelectorAll('.content section');
            const navLinks = document.querySelectorAll('.sidebar a');

            // Collapsible sections
            document.querySelectorAll('.content h3').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    header.classList.toggle('collapsed');
                    content.classList.toggle('collapsed');
                });
            });

            // Sidebar active link on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        navLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href') === '#' + entry.target.id) {
                                link.classList.add('active');
                            }
                        });
                    }
                });
            }, { rootMargin: '-100px 0px -50% 0px' });

            sections.forEach(section => {
                observer.observe(section);
            });
        });
    </script>

</body>
</html>